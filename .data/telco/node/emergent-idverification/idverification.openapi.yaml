openapi: 3.0.0
info:
  title: ID Verification API
  version: 1.0.0
  description: An API for government-provided ID verification services

servers:
  - url: http://node-idverification:4015
    description: Production Server

paths:
  /verify:
    post:
      summary: Submit an ID verification request
      description: |
        This endpoint is used to initiate an ID verification process.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  description: The user's full name
                dateOfBirth:
                  type: string
                  format: date
                  description: The user's date of birth
                address:
                  type: string
                  description: The user's address
                documentType:
                  type: string
                  description: The type of ID document (e.g., passport, national ID)
                documentNumber:
                  type: string
                  description: The ID document number
              required:
                - name
                - dateOfBirth
                - address
                - documentType
                - documentNumber
      responses:
        '200':
          description: Successful verification
          content:
            application/json:
              schema:
                type: object
                properties:
                  verificationStatus:
                    type: string
                    description: The status of the verification (e.g., "verified")
                  details:
                    type: object
                    description: Additional details about the verification
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error

  /health:
    get:
      summary: Health check endpoint
      description: Checks the health of the API.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    description: The health status (e.g., "OK")

  /documentValidation:
    post:
      summary: Validate ID document authenticity
      description: Validates the authenticity of a provided ID document.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                documentType:
                  type: string
                  description: The type of ID document (e.g., passport, national ID)
                documentNumber:
                  type: string
                  description: The ID document number
                issueDate:
                  type: string
                  format: date
                  description: Issue date of the document
              required:
                - documentType
                - documentNumber
                - issueDate
      responses:
        '200':
          description: Document validation successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  validationStatus:
                    type: string
                    description: The status of the document validation (e.g., "valid", "invalid")
                  details:
                    type: object
                    description: Additional details about the document validation
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error

  /passports/{passportNumber}:
    get:
      summary: Retrieve passport information
      description: Retrieves information for a specific passport based on its number.
      parameters:
        - in: path
          name: passportNumber
          required: true
          schema:
            type: string
          description: Unique passport number
      responses:
        '200':
          description: Passport information retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  passportNumber:
                    type: string
                    description: Unique passport number
                  name:
                    type: string
                    description: Full name of the passport holder
                  dateOfBirth:
                    type: string
                    format: date
                    description: Date of birth of the passport holder
                  nationality:
                    type: string
                    description: Nationality of the passport holder
                  issueDate:
                    type: string
                    format: date
                    description: Issue date of the passport
                  expiryDate:
                    type: string
                    format: date
                    description: Expiry date of the passport
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error

  /passports/{passportNumber}/travelHistory:
    get:
      summary: Retrieve travel history for a specific passport
      description: Provides the travel history associated with a specific passport.
      parameters:
        - in: path
          name: passportNumber
          required: true
          schema:
            type: string
          description: Unique passport number
      responses:
        '200':
          description: Travel history retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  passportNumber:
                    type: string
                    description: Unique passport number
                  travelEntries:
                    type: array
                    items:
                      type: object
                      properties:
                        country:
                          type: string
                          description: Country visited
                        entryDate:
                          type: string
                          format: date
                          description: Date of entry
                        exitDate:
                          type: string
                          format: date
                          description: Date of exit
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error

  /nationalIDs/{nationalId}:
    get:
      summary: Retrieve national ID information
      description: Retrieves information for a specific national ID based on its number.
      parameters:
        - in: path
          name: nationalId
          required: true
          schema:
            type: string
          description: Unique national ID number
      responses:
        '200':
          description: National ID information retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  nationalId:
                    type: string
                    description: Unique national ID number
                  name:
                    type: string
                    description: Full name of the ID holder
                  dateOfBirth:
                    type: string
                    format: date
                    description: Date of birth of the ID holder
                  address:
                    type: string
                    description: Address of the ID holder
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error

  /nationalIDs/{nationalId}/addressVerification:
    post:
      summary: Verify address for a specific national ID
      description: Confirms the validity of the residential address associated with a specific national ID.
      parameters:
        - in: path
          name: nationalId
          required: true
          schema:
            type: string
          description: Unique national ID number
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                address:
                  type: string
                  description: Address to be verified
              required:
                - address
      responses:
        '200':
          description: Address verification successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  verificationStatus:
                    type: string
                    description: The status of the address verification (e.g., "verified", "unverified")
                  details:
                    type: object
                    description: Additional details about the address verification
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
  /nationalIDs/{nationalId}/criminalRecordCheck:
    get:
      summary: Check for criminal records for a specific national ID
      description: Checks if the individual associated with the provided national ID has any criminal records.
      parameters:
        - in: path
          name: nationalId
          required: true
          schema:
            type: string
          description: Unique national ID number
      responses:
        '200':
          description: Criminal record check completed
          content:
            application/json:
              schema:
                type: object
                properties:
                  hasCriminalRecord:
                    type: boolean
                    description: Whether the individual has a criminal record
                  details:
                    type: object
                    description: Additional details about the criminal record, if any
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '404':
          description: National ID not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: National ID not found
                  details:
                    type: string
                    description: The provided national ID does not exist in the system
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error

  /driverLicenses/{licenseNumber}:
    get:
      summary: Retrieve driver's license information
      description: Retrieves information for a specific driver's license based on its number.
      parameters:
        - in: path
          name: licenseNumber
          required: true
          schema:
            type: string
          description: Unique driver's license number
      responses:
        '200':
          description: Driver's license information retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  licenseNumber:
                    type: string
                    description: Unique driver's license number
                  name:
                    type: string
                    description: Full name of the license holder
                  dateOfBirth:
                    type: string
                    format: date
                    description: Date of birth of the license holder
                  issueDate:
                    type: string
                    format: date
                    description: Issue date of the license
                  expiryDate:
                    type: string
                    format: date
                    description: Expiry date of the license
                  categories:
                    type: array
                    items:
                      type: string
                    description: Categories of vehicles the license holder is authorized to drive
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '404':
          description: Driver's license not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: Driver's license not found
                  details:
                    type: string
                    description: The provided license number does not exist in the system
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error

  /driverLicenses/{licenseNumber}/violationHistory:
    get:
      summary: Retrieve driver's license violation history
      description: Provides the violation history associated with a specific driver's license.
      parameters:
        - in: path
          name: licenseNumber
          required: true
          schema:
            type: string
          description: Unique driver's license number
      responses:
        '200':
          description: Violation history retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  licenseNumber:
                    type: string
                    description: Unique driver's license number
                  violations:
                    type: array
                    items:
                      type: object
                      properties:
                        date:
                          type: string
                          format: date
                          description: Date of the violation
                        type:
                          type: string
                          description: Type of violation
                        details:
                          type: string
                          description: Detailed description of the violation
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '404':
          description: Driver's license not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: Driver's license not found
                  details:
                    type: string
                    description: The provided license number does not exist in the system
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error

  /taxStatus/{nationalId}:
    get:
      summary: Check tax compliance status for a specific national ID
      description: Checks an individual's tax compliance status based on their national ID.
      parameters:
        - in: path
          name: nationalId
          required: true
          schema:
            type: string
          description: Unique national ID number
      responses:
        '200':
          description: Tax compliance status retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  isCompliant:
                    type: boolean
                    description: Whether the individual is compliant with tax obligations
                  details:
                    type: object
                    description: Additional details about the tax status
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '404':
          description: National ID not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: National ID not found
                  details:
                    type: string
                    description: The provided national ID does not exist in the system
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error

  /residencyStatus/{nationalId}:
    get:
      summary: Check residency status for a specific national ID
      description: Checks the residency status of an individual based on their national ID.
      parameters:
        - in: path
          name: nationalId
          required: true
          schema:
            type: string
          description: Unique national ID number
      responses:
        '200':
          description: Residency status retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  maritalStatus:
                    type: string
                    description: Residency status of the individual (e.g., "citizen", "permanent", "temporary")
                  visaType:
                    type: string
                    nullable: true
                    description: Name of the visa, if applicable
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '404':
          description: National ID not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: National ID not found
                  details:
                    type: string
                    description: The provided national ID does not exist in the system
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error

  /voterRegistration/{nationalId}:
    get:
      summary: Check voter registration status for a specific national ID
      description: Confirms an individual's voter registration status based on their national ID.
      parameters:
        - in: path
          name: nationalId
          required: true
          schema:
            type: string
          description: Unique national ID number
      responses:
        '200':
          description: Voter registration status retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  isRegistered:
                    type: boolean
                    description: Whether the individual is registered to vote
                  pollingStation:
                    type: string
                    nullable: true
                    description: Assigned polling station, if registered
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '404':
          description: National ID not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: National ID not found
                  details:
                    type: string
                    description: The provided national ID does not exist in the system
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error

  /documentReportLost/{documentType}/{documentNumber}:
    post:
      summary: Report a lost document
      description: Reports a lost ID document (e.g., passport, national ID) and initiates a replacement process.
      parameters:
        - in: path
          name: documentType
          required: true
          schema:
            type: string
          description: Type of the lost document (e.g., "passport", "national ID")
        - in: path
          name: documentNumber
          required: true
          schema:
            type: string
          description: Number of the lost document
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                reportDetails:
                  type: string
                  description: Detailed description of the loss incident
              required:
                - reportDetails
      responses:
        '200':
          description: Loss report submitted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  reportStatus:
                    type: string
                    description: Status of the loss report (e.g., "submitted", "processing")
                  reportNumber:
                    type: string
                    description: Unique identifier for the loss report
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '404':
          description: Document not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: Document not found
                  details:
                    type: string
                    description: The provided document number does not exist in the system
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error

  /documentRenewal/{documentType}/{documentNumber}:
    post:
      summary: Renew a document
      description: Submits a request for the renewal of an ID document (e.g., passport, national ID).
      parameters:
        - in: path
          name: documentType
          required: true
          schema:
            type: string
          description: Type of the document to be renewed (e.g., "passport", "national ID")
        - in: path
          name: documentNumber
          required: true
          schema:
            type: string
          description: Number of the document to be renewed
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                renewalDetails:
                  type: string
                  description: Details for the renewal request
              required:
                - renewalDetails
      responses:
        '200':
          description: Renewal request submitted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  renewalStatus:
                    type: string
                    description: Status of the renewal request (e.g., "submitted", "processing")
                  renewalReference:
                    type: string
                    description: Unique reference number for the renewal request
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
        '404':
          description: Document not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: Document not found
                  details:
                    type: string
                    description: The provided document number does not exist in the system

        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: A brief error message
                  details:
                    type: string
                    description: Detailed information about the error
